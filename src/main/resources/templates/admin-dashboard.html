<!DOCTYPE html>
<html lang="en" dir="ltr" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/png" th:href="@{/images/tts-logo-removebg-preview.png}">
    <meta name="_csrf" th:content="${_csrf.token}"/>
    <meta name="_csrf_header" th:content="${_csrf.headerName}"/>
    <title>Admin - Dashboard | TechnoKraft</title>
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css"
          integrity=""
          crossorigin="anonymous">
    <link href="https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css" rel="stylesheet" />
    <link rel="stylesheet" th:href="@{/css/admin-dashboard.css}" />
    <link rel="stylesheet" th:href="@{/css/footer.css}" >
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>
<body>
<div class="sidebar">
    <div class="logo-details">
        <img th:src="@{/images/tts-logo-removebg-preview.png}" alt="tts">
        <span class="logo_name">TechnoKraft<p class="sub-title">Training & Solution PVT. LTD.</p></span>
    </div>
    <ul class="nav-links">
        <li>
            <a href="#" class="active" onclick="showSection('dashboard')">
                <i class="bx bx-grid-alt"></i>
                <span class="links_name">Dashboard</span>
            </a>
        </li>
        <li>
            <a href="#" onclick="showSection('students')">
                <i class="bx bx-user"></i>
                <span class="links_name">Students</span>
            </a>
        </li>
        <li>
            <a href="#" onclick="showSection('results')">
                <i class="bx bx-file"></i>
                <span class="links_name">Test Results</span>
            </a>
        </li>
        <li>
            <a href="#" onclick="showSection('questions')">
                <i class="bx bx-question-mark"></i>
                <span class="links_name">Question Bank</span>
            </a>
        </li>
        <li>
            <a href="#" onclick="showSection('subjects')">
                <i class="bx bx-book"></i>
                <span class="links_name">Subjects</span>
            </a>
        </li>
        <li>
            <a href="#" onclick="showSection('reports')">
                <i class="bx bx-bar-chart-alt-2"></i>
                <span class="links_name">Analytics</span>
            </a>
        </li>
        <li>
            <a href="#" onclick="event.preventDefault(); alert('Settings page coming soon!')">
                <i class="bx bx-cog"></i>
                <span class="links_name">Settings</span>
            </a>
        </li>
        <li class="log_out">
            <a href="#" onclick="event.preventDefault(); document.getElementById('logoutForm').submit();">
                <i class="bx bx-log-out"></i>
                <span class="links_name">Log out</span>
            </a>
        </li>
    </ul>
</div>

<form id="logoutForm" th:action="@{/logout}" method="post" style="display:none;">
    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
</form>

<section class="home-section">
    <nav>
        <div class="sidebar-button">
            <i class="bx bx-menu sidebarBtn"></i>
            <span class="dashboard">Admin Dashboard</span>
        </div>
        <div class="profile-details" onclick="toggleProfileDropdown()">
            <img th:src="@{/images/default-user.png}" alt="Admin" />
            <span class="admin_name" th:text="${adminName}">Admin</span>
            <i class="bx bx-chevron-down"></i>
            <div class="profile-dropdown" id="profileDropdown">
                <a href="#" onclick="event.preventDefault(); alert('Profile page coming soon!')"><i class="bx bx-user"></i> My Profile</a>
                <a href="#" onclick="event.preventDefault(); alert('Settings page coming soon!')"><i class="bx bx-cog"></i> Settings</a>
                <a href="#" onclick="event.preventDefault(); alert('Help page coming soon!')"><i class="bx bx-help-circle"></i> Help</a>
                <a href="#" onclick="event.preventDefault(); document.getElementById('logoutForm').submit();">
                    <i class="bx bx-log-out"></i> Logout
                </a>
            </div>
        </div>
    </nav>

    <div class="home-content">
        <!-- Error/Success Messages -->
        <div th:if="${error}" class="error-message">
            <i class="bx bx-error-circle"></i>
            <span th:text="${error}">Error message</span>
        </div>
        <div th:if="${success}" class="success-message">
            <i class="bx bx-check-circle"></i>
            <span th:text="${success}">Success message</span>
        </div>

        <!-- Dashboard Section -->
        <div id="dashboard-section" class="section-content">
            <div class="overview-boxes">
                <div class="box">
                    <div class="left-side">
                        <div class="box-topic">Total Students</div>
                        <div class="number" th:text="${dashboardStats.totalStudents}">0</div>
                        <div class="indicator">
                            <i class="bx bx-up-arrow-alt"></i>
                            <span class="text">Up from yesterday</span>
                        </div>
                    </div>
                    <i class="bx bx-user cart"></i>
                </div>
                <div class="box">
                    <div class="left-side">
                        <div class="box-topic">Tests Completed</div>
                        <div class="number" th:text="${dashboardStats.testsCompleted}">0</div>
                        <div class="indicator">
                            <i class="bx bx-up-arrow-alt"></i>
                            <span class="text">Up from yesterday</span>
                        </div>
                    </div>
                    <i class="bx bx-file cart two"></i>
                </div>
                <div class="box">
                    <div class="left-side">
                        <div class="box-topic">Pass Rate</div>
                        <div class="number" th:text="${dashboardStats.passRate + '%'}">0%</div>
                        <div class="indicator">
                            <i class="bx bx-up-arrow-alt"></i>
                            <span class="text">Up from last week</span>
                        </div>
                    </div>
                    <i class="bx bx-trophy cart three"></i>
                </div>
                <div class="box">
                    <div class="left-side">
                        <div class="box-topic">Active Subjects</div>
                        <div class="number" th:text="${dashboardStats.activeSubjects}">0</div>
                        <div class="indicator">
                            <i class="bx bx-up-arrow-alt"></i>
                            <span class="text">New subject added</span>
                        </div>
                    </div>
                    <i class="bx bx-book-open cart four"></i>
                </div>
            </div>
            <div class="content-section">
                <div class="section-header">
                    <h2 class="section-title">Recent Test Results</h2>
                    <button class="btn btn-primary" onclick="showSection('results')">
                        View All <i class="bx bx-right-arrow-alt"></i>
                    </button>
                </div>
                <div class="table-container">
                    <table th:if="${not #lists.isEmpty(recentResults)}">
                        <thead>
                        <tr>
                            <th>Student ID</th>
                            <th>Name</th>
                            <th>Subject</th>
                            <th>Score</th>
                            <th>Status</th>
                            <th>Date</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="result : ${recentResults}">
                            <td th:text="${result.studentId}">STD-001</td>
                            <td th:text="${result.studentName}">Student Name</td>
                            <td th:text="${result.subjectName}">Subject</td>
                            <td th:text="${result.score + '/' + result.totalMarks}">0/100</td>
                            <td>
                                <span class="status-badge"
                                      th:classappend="${result.passed ? 'status-pass' : 'status-fail'}"
                                      th:text="${result.passed ? 'Pass' : 'Fail'}">Pass</span>
                            </td>
                            <td th:text="${#temporals.format(result.testDate, 'MMM dd, yyyy')}">Date</td>
                        </tr>
                        </tbody>
                    </table>
                    <div th:if="${#lists.isEmpty(recentResults)}" class="empty-state">
                        <i class="bx bx-file"></i>
                        <h3>No Test Results Found</h3>
                        <p>There are no recent test results to display</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Students Section -->
        <div id="students-section" class="section-content" style="display: none;">
            <div class="content-section">
                <div class="section-header">
                    <h2 class="section-title">Student Management</h2>
                    <button class="btn btn-primary" onclick="openModal('addStudentModal')">
                        <i class="bx bx-plus"></i> Add New Student
                    </button>
                </div>
                <div class="search-bar">
                    <input type="text" placeholder="Search by Student ID or Name..." id="studentSearch">
                    <button class="btn btn-primary" onclick="searchStudent()">
                        <i class="bx bx-search"></i> Search
                    </button>
                    <button class="btn btn-success" onclick="downloadAllReports()">
                        <i class="bx bx-download"></i> Export All
                    </button>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                        <tr>
                            <th>Student ID</th>
                            <th>Full Name</th>
                            <th>Email</th>
                            <th>Registered Date</th>
                            <th>Tests Taken</th>
                            <th>Actions</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>STD-001</td>
                            <td>Rahul Sharma</td>
                            <td>rahul.sharma@email.com</td>
                            <td>Sep 15, 2025</td>
                            <td>12</td>
                            <td>
                                <div class="action-buttons">
                                    <button class="action-btn btn-primary" title="View Details">
                                        <i class="bx bx-show"></i>
                                    </button>
                                    <button class="action-btn btn-success" title="Download Report">
                                        <i class="bx bx-download"></i>
                                    </button>
                                    <button class="action-btn btn-danger" title="Delete">
                                        <i class="bx bx-trash"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>STD-002</td>
                            <td>Priya Patel</td>
                            <td>priya.patel@email.com</td>
                            <td>Sep 18, 2025</td>
                            <td>8</td>
                            <td>
                                <div class="action-buttons">
                                    <button class="action-btn btn-primary" title="View Details">
                                        <i class="bx bx-show"></i>
                                    </button>
                                    <button class="action-btn btn-success" title="Download Report">
                                        <i class="bx bx-download"></i>
                                    </button>
                                    <button class="action-btn btn-danger" title="Delete">
                                        <i class="bx bx-trash"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>


        <!-- Test Results Section -->
        <div id="results-section" class="section-content" style="display: none;">
            <div class="content-section">
                <div class="section-header">
                    <h2 class="section-title">Test Results & Reports</h2>
                    <button class="btn btn-success" onclick="alert('Export functionality coming soon!')">
                        <i class="bx bx-download"></i> Download All Reports
                    </button>
                </div>
                <div class="search-bar">
                    <form onsubmit="event.preventDefault(); alert('Filter functionality coming soon!')">
                        <input type="text" name="query" placeholder="Search by Student ID or Name..." th:value="${filterQuery}">
                        <select name="subjectId">
                            <option value="">All Subjects</option>
                            <option th:each="subject : ${subjects}"
                                    th:value="${subject.id}"
                                    th:text="${subject.name}"
                                    th:selected="${subject.id == selectedSubjectId}">Subject</option>
                        </select>
                        <select name="status">
                            <option value="">All Status</option>
                            <option value="pass" th:selected="${selectedStatus == 'pass'}">Pass</option>
                            <option value="fail" th:selected="${selectedStatus == 'fail'}">Fail</option>
                        </select>
                        <button class="btn btn-primary" type="submit">
                            <i class="bx bx-filter"></i> Filter
                        </button>
                    </form>
                </div>
                <div class="table-container">
                    <table th:if="${not #lists.isEmpty(testResults)}">
                        <thead>
                        <tr>
                            <th>Student ID</th>
                            <th>Student Name</th>
                            <th>Subject</th>
                            <th>Score</th>
                            <th>Pass/Fail</th>
                            <th>Time Taken</th>
                            <th>Date</th>
                            <th>Actions</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="result : ${testResults}">
                            <td th:text="${result.studentId}">STD-001</td>
                            <td th:text="${result.studentName}">Name</td>
                            <td th:text="${result.subjectName}">Subject</td>
                            <td th:text="${result.score + '/' + result.totalMarks}">0/100</td>
                            <td>
                                <span class="status-badge"
                                      th:classappend="${result.passed ? 'status-pass' : 'status-fail'}"
                                      th:text="${result.passed ? 'Pass' : 'Fail'}">Pass</span>
                            </td>
                            <td th:text="${result.timeTaken + ' min'}">0 min</td>
                            <td th:text="${#temporals.format(result.testDate, 'MMM dd, yyyy')}">Date</td>
                            <td>
                                <div class="action-buttons">
                                    <button class="action-btn btn-primary" title="Print Score"
                                            onclick="alert('Print functionality coming soon!')">
                                        <i class="bx bx-printer"></i>
                                    </button>
                                    <button class="action-btn btn-success" title="Download PDF"
                                            onclick="alert('Download PDF functionality coming soon!')">
                                        <i class="bx bx-download"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                    <div th:if="${#lists.isEmpty(testResults)}" class="empty-state">
                        <i class="bx bx-file"></i>
                        <h3>No Test Results Found</h3>
                        <p>No test results match your search criteria</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Question Bank Section -->
        <div id="questions-section" class="section-content" style="display: none;">
            <div class="content-section">
                <div class="section-header">
                    <h2 class="section-title">Question Bank Management</h2>
                    <button class="btn btn-primary" onclick="openModal('uploadQuestionsModal')">
                        <i class="bx bx-upload"></i> Upload Questions
                    </button>
                </div>
                <div class="table-container">
                    <table th:if="${not #lists.isEmpty(questionBanks)}">
                        <thead>
                        <tr>
                            <th>Subject</th>
                            <th>File Name</th>
                            <th>Total Questions</th>
                            <th>Last Updated</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="bank : ${questionBanks}">
                            <td th:text="${bank.subjectName}">Subject</td>
                            <td th:text="${bank.fileName}">file.csv</td>
                            <td th:text="${bank.totalQuestions}">0</td>
                            <td th:text="${#temporals.format(bank.lastUpdated, 'MMM dd, yyyy')}">Date</td>
                            <td>
                                <span class="status-badge status-pass"
                                      th:text="${bank.active ? 'Active' : 'Inactive'}">Active</span>
                            </td>
                            <td>
                                <div class="action-buttons">
                                    <button class="action-btn btn-primary" title="View Questions"
                                            onclick="alert('View questions functionality coming soon!')">
                                        <i class="bx bx-show"></i>
                                    </button>
                                    <button class="action-btn btn-success" title="Download"
                                            onclick="alert('Download functionality coming soon!')">
                                        <i class="bx bx-download"></i>
                                    </button>
                                    <button class="action-btn btn-danger" title="Delete"
                                            th:onclick="'deleteQuestionBank(' + ${bank.id} + ')'">
                                        <i class="bx bx-trash"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                    <div th:if="${#lists.isEmpty(questionBanks)}" class="empty-state">
                        <i class="bx bx-question-mark"></i>
                        <h3>No Question Banks Found</h3>
                        <p>Upload your first question bank to get started</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Subjects Section -->
        <div id="subjects-section" class="section-content" style="display: none;">
            <div class="content-section">
                <div class="section-header">
                    <h2 class="section-title">Subject Management</h2>
                    <button class="btn btn-primary" onclick="openModal('addSubjectModal')">
                        <i class="bx bx-plus"></i> Add New Subject
                    </button>
                </div>
                <div th:if="${not #lists.isEmpty(allSubjects)}">
                    <div class="subject-card" th:each="subject : ${allSubjects}">
                        <div class="subject-info">
                            <div class="subject-icon">
                                <i class="bx bx-book"></i>
                            </div>
                            <div class="subject-details">
                                <h4 th:text="${subject.name}">Subject Name</h4>
                                <p>
                                    <span th:text="${subject.totalQuestions}">0</span> Questions •
                                    <span th:text="${subject.studentsEnrolled}">0</span> Students Enrolled
                                </p>
                            </div>
                        </div>
                        <div class="action-buttons">
                            <button class="action-btn btn-primary" title="View Details"
                                    onclick="alert('View details functionality coming soon!')">
                                <i class="bx bx-show"></i>
                            </button>
                            <button class="action-btn btn-secondary" title="Edit"
                                    onclick="alert('Edit functionality coming soon!')">
                                <i class="bx bx-edit"></i>
                            </button>
                            <button class="action-btn btn-danger" title="Delete"
                                    th:onclick="'deleteSubject(' + ${subject.id} + ')'">
                                <i class="bx bx-trash"></i>
                            </button>
                        </div>
                    </div>
                </div>
                <div th:if="${#lists.isEmpty(allSubjects)}" class="empty-state">
                    <i class="bx bx-book"></i>
                    <h3>No Subjects Found</h3>
                    <p>Add your first subject to start creating tests</p>
                </div>
            </div>
        </div>

        <!-- Analytics Section -->
        <div id="reports-section" class="section-content" style="display: none;">
            <div class="content-section">
                <div class="section-header">
                    <h2 class="section-title">Analytics & Reports</h2>
                    <button class="btn btn-success" onclick="alert('Export analytics functionality coming soon!')">
                        <i class="bx bx-download"></i> Export Analytics
                    </button>
                </div>
                <div class="overview-boxes" style="margin-bottom: 20px;">
                    <div class="box">
                        <div class="left-side">
                            <div class="box-topic">Avg. Score</div>
                            <div class="number" th:text="${analytics.avgScore + '%'}">0%</div>
                            <div class="indicator">
                                <i class="bx bx-up-arrow-alt"></i>
                                <span class="text" th:text="${analytics.scoreChange}">+0% this month</span>
                            </div>
                        </div>
                        <i class="bx bx-trending-up cart"></i>
                    </div>
                    <div class="box">
                        <div class="left-side">
                            <div class="box-topic">Completion Rate</div>
                            <div class="number" th:text="${analytics.completionRate + '%'}">0%</div>
                            <div class="indicator">
                                <i class="bx bx-up-arrow-alt"></i>
                                <span class="text" th:text="${analytics.completionChange}">+0% this month</span>
                            </div>
                        </div>
                        <i class="bx bx-check-circle cart two"></i>
                    </div>
                    <div class="box">
                        <div class="left-side">
                            <div class="box-topic">Avg. Time</div>
                            <div class="number" th:text="${analytics.avgTime + ' min'}">0 min</div>
                            <div class="indicator">
                                <i class="bx bx-down-arrow-alt down"></i>
                                <span class="text" th:text="${analytics.timeChange}">-0 min this month</span>
                            </div>
                        </div>
                        <i class="bx bx-time cart three"></i>
                    </div>
                    <div class="box">
                        <div class="left-side">
                            <div class="box-topic">Top Performer</div>
                            <div class="number" style="font-size: 18px;" th:text="${analytics.topPerformer}">N/A</div>
                            <div class="indicator">
                                <i class="bx bx-up-arrow-alt"></i>
                                <span class="text" th:text="${analytics.topPerformerScore + '% avg score'}">0% avg score</span>
                            </div>
                        </div>
                        <i class="bx bx-crown cart four"></i>
                    </div>
                </div>
                <h3 style="margin-top: 30px; margin-bottom: 15px; color: #333;">Subject-wise Performance</h3>
                <div class="table-container">
                    <table th:if="${not #lists.isEmpty(subjectPerformance)}">
                        <thead>
                        <tr>
                            <th>Subject</th>
                            <th>Total Tests</th>
                            <th>Avg. Score</th>
                            <th>Pass Rate</th>
                            <th>Avg. Time</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="perf : ${subjectPerformance}">
                            <td th:text="${perf.subjectName}">Subject</td>
                            <td th:text="${perf.totalTests}">0</td>
                            <td th:text="${perf.avgScore + '%'}">0%</td>
                            <td th:text="${perf.passRate + '%'}">0%</td>
                            <td th:text="${perf.avgTime + ' min'}">0 min</td>
                        </tr>
                        </tbody>
                    </table>
                    <div th:if="${#lists.isEmpty(subjectPerformance)}" class="empty-state">
                        <i class="bx bx-bar-chart-alt-2"></i>
                        <h3>No Analytics Data Available</h3>
                        <p>Analytics will appear once students start taking tests</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer-fab" id="footerFab">
            <img th:src="@{/images/tts-logo-removebg-preview.png}" alt="TTS" />
        </div>

        <footer id="popupFooter">
            <div class="footer-container">
                <div class="footer-col about">
                    <h3>TechnoKraft <br><span>Training & Solution Pvt. Ltd.</span></h3>
                    <p>Empowering careers through innovative technical training and real-world IT solutions. Building the next generation of developers, testers, and professionals.</p>
                </div>

                <div class="footer-col contact">
                    <h4>Contact Us</h4>
                    <ul>
                        <li><i class="fa-solid fa-phone"></i> 08645628278</li>
                        <li><i class="fa-solid fa-envelope"></i> info@tts.net.in</li>
                        <li><i class="fa-solid fa-clock"></i> 09:30 am - 08:30 pm</li>
                        <li><i class="fa-solid fa-location-dot"></i> 1st Floor, Kanchwala Avenue, Above Viju's Dabeli,<br>Thatte Nagar Marg, College Road, Nashik, Maharashtra 422005</li>
                    </ul>
                </div>

                <div class="footer-col links">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="#" onclick="event.preventDefault(); alert('Page coming soon!')">About Us</a></li>
                        <li><a href="#" onclick="event.preventDefault(); alert('Page coming soon!')">Courses</a></li>
                        <li><a href="#" onclick="event.preventDefault(); alert('Page coming soon!')">Placements</a></li>
                        <li><a href="#" onclick="event.preventDefault(); alert('Page coming soon!')">Contact</a></li>
                    </ul>
                </div>

                <div class="footer-col social">
                    <h4>Follow Us</h4>
                    <div class="social-icons">
                        <a href="https://www.linkedin.com/company/technokraft-training" target="_blank"><i class="fa-brands fa-linkedin"></i></a>
                        <a href="https://www.youtube.com/@technokrafttraining" target="_blank"><i class="fa-brands fa-youtube"></i></a>
                        <a href="https://www.instagram.com/technokraft_training" target="_blank"><i class="fa-brands fa-instagram"></i></a>
                    </div>
                </div>
            </div>

            <div class="footer-bottom">
                © 2025 TechnoKraft Training & Solution Pvt. Ltd. | All Rights Reserved
            </div>
        </footer>

    </div>

</section>


<!-- Add Subject Modal -->
<div id="addSubjectModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>Add New Subject</h2>
            <span class="close" onclick="closeModal('addSubjectModal')">&times;</span>
        </div>
        <form>
            <div class="form-group">
                <label>Subject Name *</label>
                <input type="text" placeholder="Enter subject name" required>
            </div>
            <div class="form-group">
                <label>Subject Code *</label>
                <input type="text" placeholder="e.g., JAVA-101" required>
            </div>
            <div class="form-group">
                <label>Description</label>
                <input type="text" placeholder="Brief description of the subject">
            </div>
            <button type="submit" class="btn btn-primary" style="width: 100%;">
                <i class="bx bx-plus"></i> Create Subject
            </button>
        </form>
    </div>
</div>

    <div th:if="${success}" class="success-message">
        <i class="bx bx-check-circle"></i>
        <span th:text="${success}"></span>
    </div>
    <div th:if="${error}" class="error-message">
        <i class="bx bx-error-circle"></i>
        <span th:text="${error}"></span>
    </div>
</div>


<!-- Upload Questions Modal -->
<div id="uploadQuestionsModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>Upload Questions</h2>
            <span class="close" onclick="closeModal('uploadQuestionsModal')">&times;</span>
        </div>
        <div th:if="${uploadError}" class="error-message">
            <span th:text="${uploadError}">Error</span>
        </div>
        <form onsubmit="event.preventDefault(); alert('Upload questions functionality will be implemented soon!');">
            <div class="form-group">
                <label>Select Subject *</label>
                <select required>
                    <option value="">Choose a subject</option>
                    <option th:each="subject : ${subjects}"
                            th:value="${subject.id}"
                            th:text="${subject.name}">Subject</option>
                </select>
            </div>
            <div class="form-group">
                <label>Upload CSV File *</label>
                <div class="file-upload-area" onclick="document.getElementById('fileInput').click()">
                    <i class="bx bx-cloud-upload"></i>
                    <p style="margin-top: 10px; color: #666;">Click to upload or drag and drop</p>
                    <p style="font-size: 12px; color: #999; margin-top: 5px;">CSV files only (Max 5MB)</p>
                </div>
                <input type="file" id="fileInput" name="file" accept=".csv" style="display: none;" required>
            </div>
            <button type="submit" class="btn btn-primary" style="width: 100%;">
                <i class="bx bx-upload"></i> Upload Questions
            </button>
        </form>
    </div>
</div>

<!-- Add Subject Modal -->
<div id="addSubjectModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>Add New Subject</h2>
            <span class="close" onclick="closeModal('addSubjectModal')">&times;</span>
        </div>
        <div th:if="${subjectError}" class="error-message">
            <span th:text="${subjectError}">Error</span>
        </div>
        <form onsubmit="event.preventDefault(); alert('Add subject functionality will be implemented soon!');">
            <div class="form-group">
                <label>Subject Name *</label>
                <input type="text" placeholder="Enter subject name" required>
            </div>
            <div class="form-group">
                <label>Subject Code *</label>
                <input type="text" placeholder="e.g., JAVA-101" required>
            </div>
            <div class="form-group">
                <label>Description</label>
                <input type="text" placeholder="Brief description of the subject">
            </div>
            <button type="submit" class="btn btn-primary" style="width: 100%;">
                <i class="bx bx-plus"></i> Create Subject
            </button>
        </form>
    </div>
</div>

<!-- Delete Confirmation Form (Hidden) - Disabled for now -->
<form id="deleteForm" method="post" style="display:none;">
    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
    <input type="hidden" name="_method" value="DELETE"/>
</form>

<!-- JavaScript -->
<script th:src="@{/js/footer.js}"></script>
<script th:src="@{/js/admin-dashboard.js}"></script>

<script th:inline="javascript">
    // Get CSRF token from meta tags
    const token = document.querySelector('meta[name="_csrf"]').getAttribute('content');
    const header = document.querySelector('meta[name="_csrf_header"]').getAttribute('content');

    // Delete Student Function - Temporarily disabled
    function deleteStudent(studentId) {
        alert('Delete functionality will be implemented soon!\nStudent ID: ' + studentId);
        /*
        if (confirm('Are you sure you want to delete this student? This action cannot be undone.')) {
            const form = document.getElementById('deleteForm');
            form.action = '/admin/students/' + studentId + '/delete';
            form.submit();
        }
        */
    }

    // Delete Question Bank Function - Temporarily disabled
    function deleteQuestionBank(bankId) {
        alert('Delete functionality will be implemented soon!\nBank ID: ' + bankId);
        /*
        if (confirm('Are you sure you want to delete this question bank? This action cannot be undone.')) {
            const form = document.getElementById('deleteForm');
            form.action = '/admin/questions/' + bankId + '/delete';
            form.submit();
        }
        */
    }

    // Delete Subject Function - Temporarily disabled
    function deleteSubject(subjectId) {
        alert('Delete functionality will be implemented soon!\nSubject ID: ' + subjectId);
        /*
        if (confirm('Are you sure you want to delete this subject? This will also delete all associated questions.')) {
            const form = document.getElementById('deleteForm');
            form.action = '/admin/subjects/' + subjectId + '/delete';
            form.submit();
        }
        */
    }

    // Add CSRF token to all AJAX requests
    document.addEventListener('DOMContentLoaded', function() {
        // Setup AJAX with CSRF token
        const originalFetch = window.fetch;
        window.fetch = function(url, options) {
            options = options || {};
            options.headers = options.headers || {};

            if (options.method && options.method.toUpperCase() !== 'GET') {
                options.headers[header] = token;
            }

            return originalFetch(url, options);
        };

        console.log('Admin Dashboard loaded successfully!');
        console.log('All form actions are temporarily disabled for testing.');
    });
</script>

</body>
</html>